# Блог - Тестовое задание на вакансию WEB-программист (Fullstack)

## Описание проекта

Проект представляет собой упрощенную реализацию блога, разработанную в качестве тестового задания на позицию WEB-программист (Fullstack). Приложение выполнено на чистом PHP с использованием MySQL в качестве базы данных и реализует REST API для взаимодействия с минималистичным Frontend, стилизованным под Material Design.

## Требования задания

Проект реализован в строгом соответствии с требованиями, изложенными в техническом задании:

### 1. Функциональность аутентификации

- **Регистрация пользователя:** Реализована страница регистрации с полями "логин" и "пароль". Обеспечена проверка уникальности логина.
- **Авторизация пользователя:** Реализована страница авторизации с полями "логин" и "пароль". Предусмотрен вывод сообщения об ошибке при некорректных данных.
- **Управление доступом:** Страница с записями доступна только авторизованным пользователям. Страницы регистрации и авторизации доступны только неавторизованным.
- **Выход из системы:** Реализована функция деавторизации.

### 2. Функциональность блога

- **Просмотр записей:** Реализована страница для отображения записей.
- **Пагинация:** Количество записей на странице регулируется переменной на стороне сервера. При превышении этого количества реализовано разбиение на страницы (пагинация).
- **Данные:** Записи хранятся в БД и содержат минимальный набор атрибутов: автор и текст записи.

### 3. Задание со звездочкой (Обратимое хранение паролей)

Для выполнения требования по восстановлению пароля в открытом виде (предоставление в открытом виде, а не генерация нового) реализовано обратимое шифрование регистрационных данных.

- **Шифрование:** Пароли хранятся в зашифрованном виде с использованием алгоритма **AES-128-CBC** и уникального IV (вектора инициализации) для каждого пароля.
- **Восстановление:** Реализована страница "Забыли пароль", которая позволяет восстановить исходный пароль по логину.

## Технический стек

- **Backend:** PHP 8.1 (чистый PHP, без фреймворков)
- **База данных:** MySQL 8.0
- **Frontend:** HTML5, CSS3, JavaScript (Vanilla)
- **UI Framework:** Materialize CSS (для реализации Material Design)
- **Управление зависимостями:** Composer

## Структура проекта

```
blog-app/
├── public/                 # Публичные файлы (веб-корень)
│   ├── index.html         # Главная страница
│   ├── css/style.css      # Стили приложения
│   ├── js/app.js          # JavaScript логика
│   └── .htaccess          # Конфигурация Apache
├── api/                    # REST API endpoints
│   ├── register.php       # Регистрация
│   ├── login.php          # Авторизация
│   ├── logout.php         # Выход
│   ├── posts.php          # Получение записей с пагинацией
│   ├── auth_status.php    # Проверка статуса
│   └── recover_password.php # Восстановление пароля
├── config/                 # Конфигурационные файлы
│   ├── Database.php       # Класс для подключения к БД
│   └── init_db.php        # Скрипт инициализации БД
├── includes/              # PHP классы
│   ├── User.php           # Класс для работы с пользователями
│   └── Post.php           # Класс для работы с записями
├── composer.json          # Конфигурация Composer
└── README.md             # Этот документ
```

## Установка и запуск

### Требования

- PHP 7.4 или выше (с расширениями `php-mysql`, `php-json`, `php-mbstring`)
- MySQL 5.7 или выше
- Composer

### Пошаговая инструкция

1. **Клонирование репозитория**
   ```bash
   git clone <repository-url>
   cd blog-app
   ```

2. **Установка зависимостей Composer**
   ```bash
   composer install
   ```

3. **Инициализация базы данных**
   Скрипт `init_db.php` создает базу данных `blog_db` с таблицами `users` и `posts`, а также заполняет их тестовыми данными.
   ```bash
   php config/init_db.php
   ```

4. **Запуск локального сервера**
   Для запуска приложения можно использовать встроенный сервер PHP (для разработки):
   ```bash
   cd public
   php -S localhost:8000
   ```

5. **Доступ к приложению**
   Приложение будет доступно по адресу: `http://localhost:8000`

## Тестовые учетные данные

После инициализации базы данных доступны следующие учетные данные для проверки функциональности:

| Логин | Пароль      |
|-------|-------------|
| john  | pass123     |
| jane  | password456 |
| bob   | secret789   |

## Безопасность

- **Защита от SQL-инъекций:** Все запросы к базе данных выполняются с использованием подготовленных выражений (prepared statements).
- **Защита от XSS:** Данные, полученные от пользователей, экранируются перед выводом в HTML.
- **Обратимое шифрование:** Реализовано с использованием `openssl_encrypt` и `openssl_decrypt` с уникальным IV для каждого пароля, что обеспечивает выполнение требования по восстановлению пароля при сохранении конфиденциальности.

